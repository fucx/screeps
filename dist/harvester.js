// Generated by CoffeeScript 1.9.3
(function() {
  module.exports = function(creep) {
    var extension, extensions, i, len, results, source, spawn;
    if (creep.carry.energy < creep.carryCapacity) {
      source = creep.pos.findClosest(FIND_SOURCES);
      creep.moveTo(source);
      return creep.harvest(source);
    } else {
      spawn = creep.pos.findClosest(FIND_MY_SPAWNS);
      if (spawn.energy < spawn.energyCapacity) {
        creep.moveTo(spawn);
        return creep.transferEnergy(spawn);
      } else {
        extensions = creep.room.find(FIND_MY_STRUCTURES, {
          filter: {
            structureType: STRUCTURE_EXTENSION
          }
        });
        results = [];
        for (i = 0, len = extensions.length; i < len; i++) {
          extension = extensions[i];
          if (extension.energy < extension.energyCapacity) {
            creep.moveTo(extension);
            results.push(creep.transferEnergy(extension));
          } else {
            results.push(void 0);
          }
        }
        return results;
      }
    }
  };

}).call(this);
